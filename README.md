# XWWW
Animated wallpaper transitions for X11.

This was inspired by [awww](https://codeberg.org/LGFae/awww) (the wayland wallpaper daemon with animated transitions, formerly known as [swww](https://github.com/LGFae/swww)). It is not a swww/awww replacement. Transition frames are generated by [ffmpeg](https://www.ffmpeg.org/) and set by [hsetroot](https://github.com/himdel/hsetroot/) or other wallpaper applications.

## Demo
[Watch Demo](https://github.com/user-attachments/assets/9c59f6bc-7b02-4ec5-8f88-762e0cc05c00)


## Installation

#### Dependencies
* `bash`
* `ffmpeg`
* `bc`
* `hsetroot`
* `(Optional: Any X11 wallpaper applicaiton)`

#### Automatic

*WARNING*: Read any script before running it on your system.
```bash
curl https://raw.githubusercontent.com/hameedrezafarrokhi/xwww/main/install.sh | bash -;
```

#### Manual
```bash
git clone https://github.com/hameedrezafarrokhi/xwww
cd xwww
sudo make install
```



### List of Animations

* fade
* slide-up, slide-down, slide-right, slide-left
* oblique-right, oblique-left
* push-left, push-up
* emerge-right, emerge-down
* circle-in, circle-out
* pixelate
* wave
* spin
* open
* close
* zoom-out



### Configuration

Configuration file should be in `$HOME/.config/xwww/xwwwrc`

example:
```bash
SLEEP=0.02
FRAMES=10
ANIMATION="slide-right"
```

#### Default Conf.

```bash
# Resolution of the generated frames;
# Higher resolutions take longer to load;
# This is not the final resolution of the wallpaper,
# Just transition frames.
R_X=1920
R_Y=1080

# Command that sets transition frames;
# Only consistant one I've found is 'hsetroot -cover '
# Other applications might or might not work.
TRANSITION_CMD="hsetroot -cover"

# Final command that sets the wallpaper;
# Can be anything (hsetroot, feh, nitrogen, xwallpaper...).
FINAL_CMD="hsetroot -cover "

# Sleep tmie between each frame (in seconds).
SLEEP=0.001

# Total amount of frames generated;
# Higher would be slower to load but smoother;
# Lower would be faster to load but less smooth.
FRAMES=14

# Default animation;
# Would be ignored if RND (random) is set.
ANIMATION="fade"

# Set a random animation from a list.
# Example: "slide-up,slide-down,zoom-out"
RND=

# Hardware decoding flag for ffmpeg.
ACCEL=(-hwaccel vaapi)

# Image format for frames;
# png, jpeg, bmp, webp...
# png might be slower;
# bmp might be faster;
# Use png for "fade" animation.
FORMAT=png


# Some Animation Specific Settings:

# Pixelate
# Maximum size of each pixel.
PIXELATE_SIZE=64

# Wave
# Wave amplitude
WAVE_AMP=50
# Wave Lenght
WAVE_LENGHT=200

```

### Usage
* Run 'xwww' to see general usage
```bash
xwww
```

* Set an image
```bash
xwww "$HOME/Pictures/wallpapers/wallpaper.png"
```

* Set a random image from a folder
```bash
xwww "$HOME/Pictures/wallpapers"
```

* You can override the default or the config values with these flags
```bash
xwww "$HOME/Pictures/wallpapers/wallpaper.png" --frame 20 --speed 0.1 --animation slide-up --format bmp --random "wave,pixelate"
```
- If '--random' is set or RND is defined in the configuration file, '--animation' would be ignored.


* You can make your own script or systemd services to make a slide show.

### Limitations & Issues

* At the moment it is a very janky solution, but it kinda sorta works for now. It is not fully optimised yet. Work in progress...
* It is VERY resouce intensive and hardware dependent. Older cpus might struggle a bit. newer cpus should be ok (ish).
* 1377x768, 10 frames, bmp, image over 1mg -> very fast.
* 4k, 30 frames, png, imager over 20mg -> slow.
* Fast animations: fade, sliding types.
* Heavier animations: wave, open, close, circles...
* The speed of the transitions can't be increased, because of how hsetroot works. I'll try other tools in the future. 
* I've only tested with 1080 and 768 with 16:9 ratio.
* I haven't tested on multi-monitors.


### Please Help Me :)

* If you can give me feedback on how it works on different hardware, it would really help me optimising it.
* If you see any bugs and jank, or any ideas/suggestions on other transitions/effects, please let me know.
* If you want to make your own transition effects see the examples in the repo and create one with ffmpeg.
* Using ffmpeg was challenging. If anyone has experience with ffmpeg and can help me optimise it, I would really appreciate it.
